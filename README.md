# ds97spcheck

`ksp計算機ツール.html` は、ダビスタPS版（ダビスタ97）向けのスピード確認ツールです。  
種牡馬価格・母馬価格・成長型・馬体重などを入力し、KSP（本ツール内の基準値）を確認できます。

## 動かし方

1. `ksp計算機ツール.html` をブラウザで開く
2. 左側の入力欄に必要項目を入力
3. `KSP計算` ボタンで結果を表示
4. 必要なら結果をリスト保存して比較

ビルドやサーバ起動は不要です（単一HTMLで動作）。

## 使い方

### 1) 基本入力

- 仔馬価格
- 性別（牡 / 牝）
- 種牡馬価格（または種牡馬名選択で自動入力）
- 母馬価格（または母馬名選択で自動入力）
- ベスト体重（kg）
- 成長型
- 入厩月 / 入厩週（必要に応じて）

### 2) コメント週の入力（任意）

- コメント週の2x4グリッドをクリックして情報を絞り込む
- 健康系コメントのマスはクリックで状態切り替えが可能
- 不要なら `コメント週リセット` で初期化

### 3) 計算実行と結果確認

- `KSP計算` で結果を表示
- コメント週未設定時は範囲表示、設定時は候補の詳細表示
- 必要なら `データをリストに追加` で保存

## ボタンの意味

### 入力エリア

- `全項目のリセット`
  - 主要入力・コメント週・計算表示を初期化
- `+10 / -10 / +50 / -50`（ベスト体重の横）
  - ベスト体重を素早く増減
- `4月1週に戻す`
  - 入厩月 / 入厩週を初期値に戻す
- `コメント週リセット`
  - コメント週グリッドの選択状態をクリア

### 計算・保存

- `KSP計算`
  - 現在の入力内容でKSP表示を更新
- `データをリストに追加`
  - 直前の計算結果を保存リストへ追加
- `選択リスト削除`（右側リストエリア）
  - 指定したリスト番号の保存データを削除

### 履歴エリア

- `母馬価格に戻す`（各履歴行）
  - 対応する履歴価格を母馬価格入力欄へ復元

## 付帯機能

- 種牡馬 / 母馬の候補選択
  - 系統・頭文字で絞り込み、馬名選択で価格を反映
- 計算結果のリスト保存（最大3件）
  - KSP結果、成長型、コメント要約を保存
- 母馬価格履歴（最大3件）
  - 直近の価格を保持し、ワンクリック再入力
- コメント補助チェック
  - `2歳素質` / `2歳賢い` を保存要約に反映

## 注意事項

- 入力不足時は計算できません。必須項目を先に入力してください。
- 文字化けして見える環境では、エディタ/ターミナル側の文字コード設定をUTF-8にしてください。
- 馬データはHTML内に埋め込みです。外部CSV読み込みは不要です。
